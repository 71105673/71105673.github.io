---
title: "RV32I-APB Day-4"
date: "2025-09-03"
thumbnail: "../../../assets/img/CPU/APB/image.png"
---

# C에서 메모리 할당 / Type Casting
![alt text](<../../../assets/img/CPU/APB4_0903/스크린샷 2025-09-03 162238.png>)

- .FDR: 주소 자체를 직접 가르킴
- ->CR: 주소가 가르키는 값을 가르킴

```c
#include <stdint.h>

typedef struct {
    uint32_t CR;
    uint32_t FDR;
}FND_TypeDef;

#define APB_BASE    0x10000000
#define FND_BASE    (APB_BASE + 0x4000)
#define FND         ((FND_TypeDef *)(FND_BASE))
// #define FND_CR      (*(uint32_t *)(FND_BASE + 0x00))
// #define FND_FDR     (*(uint32_t *)(FND_BASE + 0x04))

void FND_Init(FND_TypeDef *fnd); // 매개변수로 주소를 받음
void FND_WriteData(FND_TypeDef *fnd, uint32_t d);

void delay(uint32_t t);

int main()
{
    // FND_CR = 0x01;
    // FND_FDR = 1234;

    FND->CR = 0x01;
    // FND->FDR = 1234;
    FND_Init(FND);
    uint32_t data = 0;
    
    while (1)
    {
        //FND->FDR = data;
        FND_WriteData(FND, data);   // 초기화 하고 데이터 넣고
        data++;
        delay(1000);
    }

    return 0;
}

void FND_Init(FND_TypeDef *fnd)
{
    fnd->CR = 0x01;
}

void FND_WriteData(FND_TypeDef *fnd, uint32_t d)
{
    fnd->FDR = d;
}

void delay(uint32_t t)
{
    for (int i=0; i<t; i++){
        for (int j=0; j<1000; j++);
    }
}
```